<!DOCTYPE html>
<html lang="cs">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CZBOT - Cron Generátor</title>
    <link href="templatemo-nexus-style.css" rel="stylesheet">
</head>
<body id="top">
    <div class="cyber-bg">
        <div class="cyber-gradient"></div>
        <div class="matrix-rain" id="matrixRain"></div>
    </div>
    
    <div class="particles" id="particlesContainer"></div>
    
    <div class="data-streams" id="dataStreams"></div>
    
    <div class="orb orb1"></div>
    <div class="orb orb2"></div>
    <div class="orb orb3"></div>
    
    <div class="grid-overlay">
        <div class="grid-lines"></div>
        <div class="grid-glow"></div>
    </div>
    
    <div class="scanlines"></div>
    <div class="noise-overlay"></div>
    
    <nav>
        <div class="nav-container">
            <a href="index.html" class="logo">CZbot</a>
            
            <ul class="nav-links">
                <li><a href="commands.html">Příkazy</a></li>

                <li class="dropdown">
                    <a href="#" class="dropdown-toggle">Moduly ▾</a>
                    <ul class="dropdown-menu">
                        <li><a href="modules/auditlogger.html">Auditlogger</a></li>
                        <li><a href="modules/audio_stream.html">Audio Stream</a></li>
                        <li><a href="modules/autopublish.html">Automatické publikování zpráv z kanálů oznámení</a></li>
                        <li><a href="modules/autorole.html">Autorole, Ověřování uživatelů a Reakční role</a></li>
                        <li><a href="modules/basic_user_commands.html">Běžné uživatelské a zábavné příkazy</a></li>
                        <li><a href="modules/basic_mod_commands.html">Běžné moderátorské příkazy</a></li>
                        <li><a href="modules/bot_localization.html">Bot localization and Language Settings</a></li>
                        <li><a href="modules/modules/crossban.html">Crossban</a></li>
                        <li><a href="modules/temp_voice.html">Dočasné hlasové kanály</a></li>
                        <li><a href="modules/giveaway.html">Giveaway(e)</a></li>
                        <li><a href="modules/birthdays.html">Narozeniny</a></li>
                        <li><a href="modules/patreon.html">Patreon</a></li>
                        <li><a href="modules/counting.html">Počítání</a></li>
                        <li><a href="modules/advanced_schedules.html">Pokročilé plánované zprávy</a></li>
                        <li><a href="modules/reactions.html">Reakce smajlíky na zprávy</a></li>
                        <li><a href="modules/reputation.html">Reputace</a></li>
                        <li><a href="modules/rss_reader.html">RSS Čtečka</a></li>
                        <li><a href="modules/scam_prevence.html">Scam Prevence</a></li>
                        <li><a href="modules/schedules.html">Schedules ‐ Plánované zprávy</a></li>
                        <li><a href="modules/stats.html">Statistiky serveru</a></li>
                        <li><a href="modules/holidays.html">Svátky (CZ SK)</a></li>
                        <li><a href="modules/feedback.html">Systém zpětné vazby a návrhů</a></li>
                        <li><a href="modules/tickets.html">Tikety</a></li>
                        <li><a href="modules/translate.html">Translate modul</a></li>
                        <li><a href="modules/threads.html">Tvorba vláken na zprávy</a></li>
                        <li><a href="modules/welcome_leave.html">Uvítací a odchodové zprávy (Welcome Leave)</a></li>
                        <li><a href="modules/vote.html">Vote ‐ Hlasování</a></li>
                        <li><a href="modules/watermark.html">Vodoznak s vlastním textem na obrázky</a></li>
                        <li><a href="modules/xp.html">XP systém a úrovně</a></li>
                        <li><a href="modules/backup.html">Zálohování a Obnova Serverů</a></li>
                        <li><a href="modules/confessions.html">Zpovědi (Anonymní Zprávy)</a></li>
                    </ul>
                </li>

                <li class="dropdown">
                    <a href="#" class="dropdown-toggle">Nástroje ▾</a>
                    <ul class="dropdown-menu">
                        <li><a href="crongenerator.html">Cron Generátor</a></li>
                        <li><a href="embedgenerator.html">Embed Generátor</a></li>
                        <li><a href="https://github.com/users/papiscze/projects/9">Roadmapa</a></li>
                        <li><a href="stats.html">Statistiky bota</a></li>
                    </ul>
                </li>

                <li><a href="warns.html">Moderátorské záznamy</a></li>
                <li><a href="https://rs422cznas.myds.me:5038/stats/">Statistiky serveru</a></li>
                <li><a href="privacy.html">GDPR / ToS</a></li>
            </ul>

            <div class="nav-bottom">
                <a href="https://discord.com/oauth2/authorize?client_id=902877191086420008&permissions=8&scope=bot%20applications.commands" class="cyber-button">Pozvat bota</a>
            </div>

            <button class="mobile-menu-button" id="mobileMenuBtn">
                <div class="hamburger">
                    <span></span>
                    <span></span>
                    <span></span>
                </div>
            </button>
        </div>
    </nav>
    <div class="mobile-menu-overlay" id="mobileMenuOverlay"></div>
    
    <div class="mobile-menu" id="mobileMenu">
        <div class="mobile-menu-header">
            <a href="index.html" class="mobile-menu-logo">CZbot</a>
            <button class="mobile-menu-close" id="mobileMenuClose">✕</button>
        </div>
        <div class="mobile-menu-cta">
            <a href="https://discord.com/oauth2/authorize?client_id=902877191086420008&permissions=8&scope=bot%20applications.commands" class="cyber-button">Přidat bota</a>
        </div>
        <nav class="mobile-menu-nav">
            <ul>
                <li><a href="commands.html">Příkazy</a></li>

                <li class="dropdown">
                    <a href="#" class="dropdown-toggle">Nástroje ▾</a>
                    <ul class="dropdown-menu">
                        <li><a href="crongenerator.html">Cron Generátor</a></li>
                        <li><a href="embedgenerator.html">Embed Generátor</a></li>
                        <li><a href="https://github.com/users/papiscze/projects/9">Roadmapa</a></li>
                        <li><a href="stats.html">Statistiky bota</a></li>
                    </ul>
                </li>

                <li><a href="warns.html">Moderátorské záznamy</a></li>
                <li><a href="https://rs422cznas.myds.me:5038/stats/">Statistiky serveru</a></li>
                <li><a href="privacy.html">GDPR / ToS</a></li>

                <li class="dropdown">
                    <a href="#" class="dropdown-toggle">Moduly ▾</a>
                    <ul class="dropdown-menu">
                        <li><a href="modules/auditlogger.html">Auditlogger</a></li>
                        <li><a href="modules/audio_stream.html">Audio Stream</a></li>
                        <li><a href="modules/autopublish.html">Automatické publikování zpráv z kanálů oznámení</a></li>
                        <li><a href="modules/autorole.html">Autorole, Ověřování uživatelů a Reakční role</a></li>
                        <li><a href="modules/basic_user_commands.html">Běžné uživatelské a zábavné příkazy</a></li>
                        <li><a href="modules/basic_mod_commands.html">Běžné moderátorské příkazy</a></li>
                        <li><a href="modules/bot_localization.html">Bot localization and Language Settings</a></li>
                        <li><a href="modules/modules/crossban.html">Crossban</a></li>
                        <li><a href="modules/temp_voice.html">Dočasné hlasové kanály</a></li>
                        <li><a href="modules/giveaway.html">Giveaway(e)</a></li>
                        <li><a href="modules/birthdays.html">Narozeniny</a></li>
                        <li><a href="modules/patreon.html">Patreon</a></li>
                        <li><a href="modules/counting.html">Počítání</a></li>
                        <li><a href="modules/advanced_schedules.html">Pokročilé plánované zprávy</a></li>
                        <li><a href="modules/reactions.html">Reakce smajlíky na zprávy</a></li>
                        <li><a href="modules/reputation.html">Reputace</a></li>
                        <li><a href="modules/rss_reader.html">RSS Čtečka</a></li>
                        <li><a href="modules/scam_prevence.html">Scam Prevence</a></li>
                        <li><a href="modules/schedules.html">Schedules ‐ Plánované zprávy</a></li>
                        <li><a href="modules/stats.html">Statistiky serveru</a></li>
                        <li><a href="modules/holidays.html">Svátky (CZ SK)</a></li>
                        <li><a href="modules/feedback.html">Systém zpětné vazby a návrhů</a></li>
                        <li><a href="modules/tickets.html">Tikety</a></li>
                        <li><a href="modules/translate.html">Translate modul</a></li>
                        <li><a href="modules/threads.html">Tvorba vláken na zprávy</a></li>
                        <li><a href="modules/welcome_leave.html">Uvítací a odchodové zprávy (Welcome Leave)</a></li>
                        <li><a href="modules/vote.html">Vote ‐ Hlasování</a></li>
                        <li><a href="modules/watermark.html">Vodoznak s vlastním textem na obrázky</a></li>
                        <li><a href="modules/xp.html">XP systém a úrovně</a></li>
                        <li><a href="modules/backup.html">Zálohování a Obnova Serverů</a></li>
                        <li><a href="modules/confessions.html">Zpovědi (Anonymní Zprávy)</a></li>
                    </ul>
                </li>           
            </ul>
        </nav>
    </div>


    <div class="content-section">
        <div class="content-container">

            <h1 class="page-title">Cron Generátor</h1>
            <p class="page-subtitle">Vytvořte si CRON výraz pro plánování pokročilých zpráv v CZbotovi.</p>

            <div class="cron-generator-box"> 
                <div class="cron-field-grid">
                    <div class="cron-field-group">
                        <label for="minute-select" class="cron-label">Minuta (0-59)</label>
                        <select id="minute-select" class="cyber-select" multiple size="5" data-field="minute">
                            <option value="*" selected>Každou minutu (*)</option>
                            <option value="0">00 (Na začátku hodiny)</option>
                            <option value="*/5">Každých 5 minut (*/5)</option>
                            <option value="*/10">Každých 10 minut</option>
                            <option value="*/30">Každých 30 minut</option>
                            </select>
                    </div>

                    <div class="cron-field-group">
                        <label for="hour-select" class="cron-label">Hodina (0-23)</label>
                        <select id="hour-select" class="cyber-select" multiple size="5" data-field="hour">
                            <option value="*" selected>Každou hodinu (*)</option>
                            <option value="9-17">Během pracovní doby (9-17)</option>
                            </select>
                    </div>

                    <div class="cron-field-group">
                        <label for="day-of-month-select" class="cron-label">Den v měsíci (1-31)</label>
                        <select id="day-of-month-select" class="cyber-select" multiple size="5" data-field="day-of-month">
                            <option value="*" selected>Každý den v měsíci (*)</option>
                            <option value="1">První den v měsíci</option>
                            <option value="15">V polovině měsíce</option>
                            </select>
                    </div>

                    <div class="cron-field-group">
                        <label for="month-select" class="cron-label">Měsíc (1-12)</label>
                        <select id="month-select" class="cyber-select" multiple size="5" data-field="month">
                            <option value="*" selected>Každý měsíc (*)</option>
                            <option value="1,7">Leden a Červenec</option>
                            </select>
                    </div>

                    <div class="cron-field-group">
                        <label for="day-of-week-select" class="cron-label">Den v týdnu (0-7)</label>
                        <select id="day-of-week-select" class="cyber-select" multiple size="5" data-field="day-of-week">
                            <option value="*" selected>Každý den v týdnu (*)</option>
                            <option value="1-5">Všední dny (Po-Pá)</option>
                            <option value="0,6">Víkendy (So, Ne)</option>
                            <option value="1">Pouze Pondělí</option>
                            </select>
                    </div>
                </div>

                <div class="cron-result-box">
                    <h3 class="result-title">Vygenerovaný CRON výraz</h3>
                    <div class="cron-expression-output">
                        <code id="cronExpression" class="cron-code">* * * * *</code>
                        <button class="cyber-button small-button copy-button" id="copyCronBtn">Kopírovat</button>
                    </div>
                    
                    <div class="cron-explanation" id="cronExplanation">
                        <span class="explanation-icon">ℹ️</span>
                        <p id="explanationText">Bude spuštěno <strong>každou minutu</strong>.</p>
                    </div>
                </div>

                <div class="quick-examples">
                    <h3 class="examples-title">Rychlé příklady</h3>
                    <div class="examples-buttons" id="exampleButtons">
                        <button class="cyber-button example-btn" data-cron="0 * * * *">Každou celou hodinu</button>
                        <button class="cyber-button example-btn" data-cron="0 12 * * *">Každý den ve 12:00</button>
                        <button class="cyber-button example-btn" data-cron="0 10 * * 1">Každé Pondělí v 10:00</button>
                        <button class="cyber-button example-btn" data-cron="*/15 * * * *">Každých 15 minut</button>
                    </div>
                </div>

            </div>

            <div class="cron-instructions-box">
                <h2 class="instructions-title">Použití CRONu v CZbotovi</h2>

                <p>Nástroj výše vám pomůže sestavit výraz. Pro jeho použití v Discordu zadejte příkaz:</p>
                <code class="command-code">/planzpravu pridat_cron</code>
                
                <ul class="command-fields">
                    <li><span class="field-name">cron_vyraz:</span> Zadejte <strong>vygenerovaný CRON výraz</strong> (např. <code class="inline-code">0 12 * * 2</code> pro středu).</li>
                    <li><span class="field-name">channel:</span> Vyberte <strong>textový kanál</strong>, kam má být zpráva odeslána.</li>
                    <li><span class="field-name">zprava:</span> Zde zadejte <strong>text zprávy</strong>. Pro nový řádek použijte symbol <code class="inline-code">|</code> (svislítko).</li>
                </ul>

                <h3 class="table-title">Mapování Dnů v týdnu</h3>
                <p class="table-subtitle">CRON používá čísla, kde <strong>Neděle</strong> je obvykle <strong>0</strong> nebo <strong>7</strong>.</p>
                <div class="table-wrapper">
                    <table class="cyber-table">
                        <thead>
                            <tr>
                                <th>Den v týdnu</th>
                                <th>Číslo pro CRON (CZbot)</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr><td>Pondělí</td><td>1</td></tr>
                            <tr><td>Úterý</td><td>2</td></tr>
                            <tr><td>Středa</td><td>3</td></tr>
                            <tr><td>Čtvrtek</td><td>4</td></tr>
                            <tr><td>Pátek</td><td>5</td></tr>
                            <tr><td>Sobota</td><td>6</td></tr>
                            <tr><td>Neděle</td><td>0 nebo 7</td></tr>
                        </tbody>
                    </table>
                </div>

                <h3 class="table-title">Příklady kompatibilních CRON výrazů</h3>
                <div class="table-wrapper">
                    <table class="cyber-table">
                        <thead>
                            <tr>
                                <th>Cron výraz</th>
                                <th>Význam</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr><td><code class="inline-code">0 10 * * *</code></td><td>každý den v 10:00</td></tr>
                            <tr><td><code class="inline-code">0 12 * * 1-5</code></td><td>každý pracovní den (Po-Pá) v 12:00</td></tr>
                            <tr><td><code class="inline-code">0 8 * * 0</code></td><td>každou neděli v 8:00</td></tr>
                            <tr><td><code class="inline-code">*/15 * * * *</code></td><td>každých 15 minut</td></tr>
                            <tr><td><code class="inline-code">0 10 1 * *</code></td><td>první den v měsíci v 10:00</td></tr>
                            <tr><td><code class="inline-code">0 10 1,15 * *</code></td><td>1. a 15. den v měsíci v 10:00</td></tr>
                            <tr><td><code class="inline-code">59 11 1-7 * 3</code></td><td>první středa (3) v měsíci v 11:59 (Použití rozsahu pro den v měsíci s dnem v týdnu)</td></tr>
                            <tr><td><code class="inline-code">0 12 * 10 3</code></td><td>každá středa (3) v říjnu (10) ve 12:00</td></tr>
                        </tbody>
                    </table>
                </div>
                
            </div>
            </div>
    </div>

    <footer class="footer">
        <div class="footer-content">
            <div class="footer-links">
                <a href="https://github.com/papiscze/czbot">GitHub</a>
                <span class="footer-separator">•</span>
                <a href="https://discord.gg/hk6PdtVxbm">Support Server</a>
                <span class="footer-separator">•</span>
                <a href="https://github.com/papiscze/czbot/wiki">GitHub dokumentace</a>
                <span class="footer-separator">•</span>
                <a href="mailto:admin@ofpmafia.eu">Kontakt</a>
            </div>
            <div class="footer-bottom">
                <p>&copy; 2025 CZbot. Verze webu 1.0. Všechna práva vyhrazena</p>
                <p class="footer-credit">Šablona inspirována <a href="https://templatemo.com" target="_blank" rel="noopener nofollow">TemplateMo</a></p>
            </div>
        </div>
    </footer>

    <script>
        // -----------------------------------------------------
        // 1. LOGIKA NAVIGACE (Oprava nefunkčního menu)
        // -----------------------------------------------------
        
        function initNavigation() {
            const mobileMenuBtn = document.getElementById('mobileMenuBtn');
            const mobileMenuOverlay = document.getElementById('mobileMenuOverlay');
            const mobileMenu = document.getElementById('mobileMenu');
            const mobileMenuClose = document.getElementById('mobileMenuClose');
            const dropdownToggles = document.querySelectorAll('.dropdown-toggle');
            
            // --- Mobilní menu ---
            if (mobileMenuBtn && mobileMenuOverlay && mobileMenu && mobileMenuClose) {
                mobileMenuBtn.addEventListener('click', () => {
                    mobileMenu.classList.add('active');
                    mobileMenuOverlay.classList.add('active');
                });

                const closeMenu = () => {
                    mobileMenu.classList.remove('active');
                    mobileMenuOverlay.classList.remove('active');
                };

                mobileMenuClose.addEventListener('click', closeMenu);
                mobileMenuOverlay.addEventListener('click', closeMenu);
            }

            // --- Navigační dropdowns (Rozbalovací menu) ---
            dropdownToggles.forEach(toggle => {
                toggle.addEventListener('click', (e) => {
                    e.preventDefault();
                    const parentLi = toggle.closest('li.dropdown');
                    if (parentLi) {
                        parentLi.classList.toggle('open'); 
                        
                        // Zavře ostatní dropdowns
                        dropdownToggles.forEach(otherToggle => {
                            if (otherToggle !== toggle) {
                                otherToggle.closest('li.dropdown').classList.remove('open');
                            }
                        });
                    }
                });
            });
        }


        // -----------------------------------------------------
        // 2. LOGIKA CRON GENERÁTORU
        // -----------------------------------------------------

        function initCronGenerator() {
            const cronExpressionElement = document.getElementById('cronExpression');
            const explanationTextElement = document.getElementById('explanationText');
            const allSelects = document.querySelectorAll('.cyber-select[data-field]');
            const exampleButtons = document.getElementById('exampleButtons');
            const copyCronBtn = document.getElementById('copyCronBtn');

            // Pomocná funkce pro naplnění SELECT prvků
            function fillSelect(selectElement, start, end) {
                for (let i = start; i <= end; i++) {
                    const option = document.createElement('option');
                    option.value = i;
                    option.textContent = (i < 10 ? '0' : '') + i;
                    selectElement.appendChild(option);
                }
            }

            // Naplnění CRON roletek
            fillSelect(document.getElementById('minute-select'), 0, 59);
            fillSelect(document.getElementById('hour-select'), 0, 23);
            fillSelect(document.getElementById('day-of-month-select'), 1, 31);
            fillSelect(document.getElementById('month-select'), 1, 12);
            // Den v týdnu: 0 (Neděle) až 6 (Sobota) + 7 (Neděle, často alternativa)
            fillSelect(document.getElementById('day-of-week-select'), 0, 7); 
            
            // Popisné názvy polí pro vysvětlení
            const fieldNames = ['Minuta', 'Hodina', 'Den v měsíci', 'Měsíc', 'Den v týdnu'];

            // Generování vysvětlení CRON výrazu (velmi zjednodušené)
            function generateExplanation(cronValues) {
                const parts = [];
                const minute = cronValues[0];
                const hour = cronValues[1];
                const dayOfMonth = cronValues[2];
                const month = cronValues[3];
                const dayOfWeek = cronValues[4];
                
                // Zde by měla být komplexnější logika (např. pomocí knihovny),
                // ale pro základní funkcionalitu použijeme jednoduché textové popisy.

                if (minute === '*' && hour === '*' && dayOfMonth === '*' && month === '*' && dayOfWeek === '*') {
                    return 'Bude spuštěno **každou minutu**.';
                }
                
                let desc = 'Bude spuštěno';

                // Hodina a minuta
                if (minute === '0' && hour !== '*') {
                    desc += ` v **${hour.split(',').join(' a ')}:00**`;
                } else if (minute !== '*' && hour !== '*') {
                     desc += ` v **${hour}:${minute}**`;
                } else if (minute !== '*' && hour === '*') {
                    desc += ` každou hodinu v **${minute}. minutě**`;
                } else if (minute === '*/15' && hour === '*') {
                    desc += ' **každých 15 minut**';
                } else if (hour !== '*') {
                    desc += ` v **${hour}. hodině**`;
                } else {
                    desc += ' vždy';
                }

                // Den v měsíci a měsíc
                if (dayOfMonth !== '*' && month !== '*') {
                    desc += ` dne **${dayOfMonth}.** v měsících **${month}**`;
                } else if (dayOfMonth !== '*') {
                    desc += ` **${dayOfMonth}. den** každého měsíce`;
                }
                
                // Den v týdnu
                if (dayOfWeek === '1-5') {
                    desc += ' ve **všední dny (Po-Pá)**';
                } else if (dayOfWeek === '0,6') {
                    desc += ' o **víkendech**';
                } else if (dayOfWeek !== '*') {
                    // Velmi zjednodušené
                    desc += ` v **konkrétní dny**`;
                }
                
                return desc + '.';
            }

            // Hlavní funkce pro aktualizaci CRON výrazu
            function updateCronExpression() {
                const values = [];
                allSelects.forEach(select => {
                    const selectedOptions = Array.from(select.selectedOptions)
                        .map(option => option.value)
                        .filter(value => value !== '*'); // Filtr: '*' se přidává jen pokud nic jiného není vybráno

                    if (selectedOptions.length === 0) {
                        values.push('*');
                    } else if (selectedOptions.length === 1 && selectedOptions[0] === '*') {
                        values.push('*'); // Pokud je vybrána jen *
                    } else {
                        // Vytvoří se seznam unikátních hodnot, bez duplicitních '*'
                        const uniqueValues = Array.from(new Set(selectedOptions));
                        values.push(uniqueValues.join(','));
                    }
                });

                const expression = values.join(' ');
                cronExpressionElement.textContent = expression;
                explanationTextElement.innerHTML = generateExplanation(values);
            }

            // Posluchači pro změny v roletkách
            allSelects.forEach(select => {
                select.addEventListener('change', updateCronExpression);
            });

            // Posluchači pro tlačítka příkladů
            exampleButtons.addEventListener('click', (e) => {
                if (e.target.classList.contains('example-btn')) {
                    const cronValue = e.target.dataset.cron;
                    const parts = cronValue.split(' ');
                    
                    // Reset všech selectů na '*'
                    allSelects.forEach(select => {
                        Array.from(select.options).forEach(option => {
                            option.selected = option.value === '*';
                        });
                    });
                    
                    // Nastavení hodnot z příkladu
                    parts.forEach((part, index) => {
                        if (index < allSelects.length) {
                            const select = allSelects[index];
                            // Zruší výběr všech předchozích možností
                            Array.from(select.options).forEach(option => option.selected = false);

                            // Vybere nové možnosti
                            part.split(',').forEach(value => {
                                const option = select.querySelector(`option[value="${value}"]`);
                                if (option) {
                                    option.selected = true;
                                }
                            });
                        }
                    });
                    updateCronExpression(); // Aktualizuje výstup
                }
            });

            // Posluchač pro tlačítko Kopírovat
            copyCronBtn.addEventListener('click', () => {
                navigator.clipboard.writeText(cronExpressionElement.textContent).then(() => {
                    copyCronBtn.textContent = 'Zkopírováno!';
                    setTimeout(() => {
                        copyCronBtn.textContent = 'Kopírovat';
                    }, 1500);
                });
            });

            // První spuštění pro inicializaci
            updateCronExpression(); 
        }

        // Spustíme obě inicializační funkce při načtení stránky
        document.addEventListener('DOMContentLoaded', () => {
            initNavigation();
            initCronGenerator();
        });
    </script>

</body>
</html>